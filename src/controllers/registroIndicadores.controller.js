const res = require("express/lib/response");
const rAsk = require("../models/Pregunta");
const registro = require("../models/Registroindicador");
const vIndicador = require("../models/vIndicators");

const raskCtrl = {};


const sector = require("../models/Sector");
//const { SigninValidRest } = require('../controllers/usuario.controller');



raskCtrl.rederrAskForm = async (req, res) => {
  console.log("cuenta que consulta:", req.user.correo);
  console.log("cuenta que consulta indicador CodSector:", req.user.codSector);


  const lPreguntas = await vIndicador.find({ idSector: req.user.codSector })
    .sort({ idIndicador: "asc" })
    .lean();

  console.log("preguntas  devueltas: ", lPreguntas);


  res.render('rIndicators/new-rask', { lPreguntas });


  console.log("Termine de renderizar");

}

raskCtrl.createNewrAsk = async (req, res) => {

  console.log("Inicio Create");


  console.log("a crear registro :", req.body);





  var {
    IND0000001,
IND0000002,
IND0000003,
IND0000004,
IND0000005,
IND0000006,
IND0000007,
IND0000008,
IND0000009,
IND0000010,
VAR0000001,
VAR0000002,
VAR0000003,
VAR0000004,
VAR0000005,
VAR0000006,
VAR0000007,
VAR0000008,
VAR0000009,
VAR0000010,
VAR0000011,
VAR0000012,
VAR0000013,
VAR0000014,
VAR0000015,
VAR0000016,
VAR0000017,
VAR0000018,
VAR0000019,
VAR0000020,

     VAR0000001_IND0000001,
    VAR0000002_IND0000001,
    VAR0000003_IND0000001,VAR0000004_IND0000001,VAR0000005_IND0000001,VAR0000006_IND0000001,
    VAR0000007_IND0000001,VAR0000008_IND0000001,VAR0000009_IND0000001,VAR0000010_IND0000001,
    VAR0000011_IND0000001,VAR0000012_IND0000001,VAR0000013_IND0000001,VAR0000014_IND0000001,
    VAR0000015_IND0000001,VAR0000016_IND0000001,VAR0000017_IND0000001,VAR0000018_IND0000001,
    VAR0000019_IND0000001,VAR0000020_IND0000001,
    VAR0000001_IND0000002,VAR0000002_IND0000002,VAR0000003_IND0000002,VAR0000004_IND0000002,
    VAR0000005_IND0000002,VAR0000006_IND0000002
    ,VAR0000007_IND0000002
    ,VAR0000008_IND0000002
    ,VAR0000009_IND0000002
    ,VAR0000010_IND0000002
    ,VAR0000011_IND0000002
    ,VAR0000012_IND0000002
    ,VAR0000013_IND0000002
    ,VAR0000014_IND0000002
    ,VAR0000015_IND0000002
    ,VAR0000016_IND0000002
    ,VAR0000017_IND0000002
    ,VAR0000018_IND0000002
    ,VAR0000019_IND0000002
    ,VAR0000020_IND0000002
    ,
    VAR0000001_IND0000003
    ,VAR0000002_IND0000003
    ,VAR0000003_IND0000003
    ,VAR0000004_IND0000003
    ,VAR0000005_IND0000003
    ,VAR0000006_IND0000003
    ,VAR0000007_IND0000003
    ,VAR0000008_IND0000003
    ,VAR0000009_IND0000003
    ,VAR0000010_IND0000003
    ,VAR0000011_IND0000003
    ,VAR0000012_IND0000003
    ,VAR0000013_IND0000003
    ,VAR0000014_IND0000003
    ,VAR0000015_IND0000003
    ,VAR0000016_IND0000003
    ,VAR0000017_IND0000003
    ,VAR0000018_IND0000003
    ,VAR0000019_IND0000003
    ,VAR0000020_IND0000003
    ,
    VAR0000001_IND0000004
    ,VAR0000002_IND0000004
    ,VAR0000003_IND0000004
    ,VAR0000004_IND0000004
    ,VAR0000005_IND0000004
    ,VAR0000006_IND0000004
    ,VAR0000007_IND0000004
    ,VAR0000008_IND0000004
    ,VAR0000009_IND0000004
    ,VAR0000010_IND0000004
    ,VAR0000011_IND0000004
    ,VAR0000012_IND0000004
    ,VAR0000013_IND0000004
    ,VAR0000014_IND0000004
    ,VAR0000015_IND0000004
    ,VAR0000016_IND0000004
    ,VAR0000017_IND0000004
    ,VAR0000018_IND0000004
    ,VAR0000019_IND0000004
    ,VAR0000020_IND0000004
    ,
    VAR0000001_IND0000005
    ,VAR0000002_IND0000005
    ,VAR0000003_IND0000005
    ,VAR0000004_IND0000005
    ,VAR0000005_IND0000005
    ,VAR0000006_IND0000005
    ,VAR0000007_IND0000005
    ,VAR0000008_IND0000005
    ,VAR0000009_IND0000005
    ,VAR0000010_IND0000005
    ,VAR0000011_IND0000005
    ,VAR0000012_IND0000005
    ,VAR0000013_IND0000005
    ,VAR0000014_IND0000005
    ,VAR0000015_IND0000005
    ,VAR0000016_IND0000005
    ,VAR0000017_IND0000005
    ,VAR0000018_IND0000005
    ,VAR0000019_IND0000005
    ,VAR0000020_IND0000005
    ,
    VAR0000001_IND0000006
    ,VAR0000002_IND0000006
    ,VAR0000003_IND0000006
    ,VAR0000004_IND0000006
    ,VAR0000005_IND0000006
    ,VAR0000006_IND0000006
    ,VAR0000007_IND0000006
    ,VAR0000008_IND0000006
    ,VAR0000009_IND0000006
    ,VAR0000010_IND0000006
    ,VAR0000011_IND0000006
    ,VAR0000012_IND0000006
    ,VAR0000013_IND0000006
    ,VAR0000014_IND0000006
    ,VAR0000015_IND0000006
    ,VAR0000016_IND0000006
    ,VAR0000017_IND0000006
    ,VAR0000018_IND0000006
    ,VAR0000019_IND0000006
    ,VAR0000020_IND0000006
    ,
    VAR0000001_IND0000007
    ,VAR0000002_IND0000007
    ,VAR0000003_IND0000007
    ,VAR0000004_IND0000007
    ,VAR0000005_IND0000007
    ,VAR0000006_IND0000007
    ,VAR0000007_IND0000007
    ,VAR0000008_IND0000007
    ,VAR0000009_IND0000007
    ,VAR0000010_IND0000007
    ,VAR0000011_IND0000007
    ,VAR0000012_IND0000007
    ,VAR0000013_IND0000007
    ,VAR0000014_IND0000007
    ,VAR0000015_IND0000007
    ,VAR0000016_IND0000007
    ,VAR0000017_IND0000007
    ,VAR0000018_IND0000007
    ,VAR0000019_IND0000007
    ,VAR0000020_IND0000007
    ,
    VAR0000001_IND0000008
    ,VAR0000002_IND0000008
    ,VAR0000003_IND0000008
    ,VAR0000004_IND0000008
    ,VAR0000005_IND0000008
    ,VAR0000006_IND0000008
    ,VAR0000007_IND0000008
    ,VAR0000008_IND0000008
    ,VAR0000009_IND0000008
    ,VAR0000010_IND0000008
    ,VAR0000011_IND0000008
    ,VAR0000012_IND0000008
    ,VAR0000013_IND0000008
    ,VAR0000014_IND0000008
    ,VAR0000015_IND0000008
    ,VAR0000016_IND0000008
    ,VAR0000017_IND0000008
    ,VAR0000018_IND0000008
    ,VAR0000019_IND0000008
    ,VAR0000020_IND0000008
    ,
    VAR0000001_IND0000009
    ,VAR0000002_IND0000009
    ,VAR0000003_IND0000009
    ,VAR0000004_IND0000009
    ,VAR0000005_IND0000009
    ,VAR0000006_IND0000009
    ,VAR0000007_IND0000009
    ,VAR0000008_IND0000009
    ,VAR0000009_IND0000009
    ,VAR0000010_IND0000009
    ,VAR0000011_IND0000009
    ,VAR0000012_IND0000009
    ,VAR0000013_IND0000009
    ,VAR0000014_IND0000009
    ,VAR0000015_IND0000009
    ,VAR0000016_IND0000009
    ,VAR0000017_IND0000009
    ,VAR0000018_IND0000009
    ,VAR0000019_IND0000009
    ,VAR0000020_IND0000009
    ,
    VAR0000001_IND0000010
    ,VAR0000002_IND0000010
    ,VAR0000003_IND0000010
    ,VAR0000004_IND0000010
    ,VAR0000005_IND0000010
    ,VAR0000006_IND0000010
    ,VAR0000007_IND0000010
    ,VAR0000008_IND0000010
    ,VAR0000009_IND0000010
    ,VAR0000010_IND0000010
    ,VAR0000011_IND0000010
    ,VAR0000012_IND0000010
    ,VAR0000013_IND0000010
    ,VAR0000014_IND0000010
    ,VAR0000015_IND0000010
    ,VAR0000016_IND0000010
    ,VAR0000017_IND0000010
    ,VAR0000018_IND0000010
    ,VAR0000019_IND0000010
    ,VAR0000020_IND0000010
     } = req.body;

    const errors = [];
  
  if (errors.length > 0) {
    res.render("rIndicators/new-rask", {
      errors,
      IND0000001,
IND0000002,
IND0000003,
IND0000004,
IND0000005,
IND0000006,
IND0000007,
IND0000008,
IND0000009,
IND0000010,
VAR0000001,
VAR0000002,
VAR0000003,
VAR0000004,
VAR0000005,
VAR0000006,
VAR0000007,
VAR0000008,
VAR0000009,
VAR0000010,
VAR0000011,
VAR0000012,
VAR0000013,
VAR0000014,
VAR0000015,
VAR0000016,
VAR0000017,
VAR0000018,
VAR0000019,
VAR0000020,

      VAR0000001_IND0000001,
      VAR0000002_IND0000001,
      VAR0000003_IND0000001,VAR0000004_IND0000001,VAR0000005_IND0000001,VAR0000006_IND0000001,
      VAR0000007_IND0000001,VAR0000008_IND0000001,VAR0000009_IND0000001,VAR0000010_IND0000001,
      VAR0000011_IND0000001,VAR0000012_IND0000001,VAR0000013_IND0000001,VAR0000014_IND0000001,
      VAR0000015_IND0000001,VAR0000016_IND0000001,VAR0000017_IND0000001,VAR0000018_IND0000001,
      VAR0000019_IND0000001,VAR0000020_IND0000001,
      VAR0000001_IND0000002,VAR0000002_IND0000002,VAR0000003_IND0000002,VAR0000004_IND0000002,
      VAR0000005_IND0000002,VAR0000006_IND0000002
      ,VAR0000007_IND0000002
      ,VAR0000008_IND0000002
      ,VAR0000009_IND0000002
      ,VAR0000010_IND0000002
      ,VAR0000011_IND0000002
      ,VAR0000012_IND0000002
      ,VAR0000013_IND0000002
      ,VAR0000014_IND0000002
      ,VAR0000015_IND0000002
      ,VAR0000016_IND0000002
      ,VAR0000017_IND0000002
      ,VAR0000018_IND0000002
      ,VAR0000019_IND0000002
      ,VAR0000020_IND0000002
      ,
      VAR0000001_IND0000003
      ,VAR0000002_IND0000003
      ,VAR0000003_IND0000003
      ,VAR0000004_IND0000003
      ,VAR0000005_IND0000003
      ,VAR0000006_IND0000003
      ,VAR0000007_IND0000003
      ,VAR0000008_IND0000003
      ,VAR0000009_IND0000003
      ,VAR0000010_IND0000003
      ,VAR0000011_IND0000003
      ,VAR0000012_IND0000003
      ,VAR0000013_IND0000003
      ,VAR0000014_IND0000003
      ,VAR0000015_IND0000003
      ,VAR0000016_IND0000003
      ,VAR0000017_IND0000003
      ,VAR0000018_IND0000003
      ,VAR0000019_IND0000003
      ,VAR0000020_IND0000003
      ,
      VAR0000001_IND0000004
      ,VAR0000002_IND0000004
      ,VAR0000003_IND0000004
      ,VAR0000004_IND0000004
      ,VAR0000005_IND0000004
      ,VAR0000006_IND0000004
      ,VAR0000007_IND0000004
      ,VAR0000008_IND0000004
      ,VAR0000009_IND0000004
      ,VAR0000010_IND0000004
      ,VAR0000011_IND0000004
      ,VAR0000012_IND0000004
      ,VAR0000013_IND0000004
      ,VAR0000014_IND0000004
      ,VAR0000015_IND0000004
      ,VAR0000016_IND0000004
      ,VAR0000017_IND0000004
      ,VAR0000018_IND0000004
      ,VAR0000019_IND0000004
      ,VAR0000020_IND0000004
      ,
      VAR0000001_IND0000005
      ,VAR0000002_IND0000005
      ,VAR0000003_IND0000005
      ,VAR0000004_IND0000005
      ,VAR0000005_IND0000005
      ,VAR0000006_IND0000005
      ,VAR0000007_IND0000005
      ,VAR0000008_IND0000005
      ,VAR0000009_IND0000005
      ,VAR0000010_IND0000005
      ,VAR0000011_IND0000005
      ,VAR0000012_IND0000005
      ,VAR0000013_IND0000005
      ,VAR0000014_IND0000005
      ,VAR0000015_IND0000005
      ,VAR0000016_IND0000005
      ,VAR0000017_IND0000005
      ,VAR0000018_IND0000005
      ,VAR0000019_IND0000005
      ,VAR0000020_IND0000005
      ,
      VAR0000001_IND0000006
      ,VAR0000002_IND0000006
      ,VAR0000003_IND0000006
      ,VAR0000004_IND0000006
      ,VAR0000005_IND0000006
      ,VAR0000006_IND0000006
      ,VAR0000007_IND0000006
      ,VAR0000008_IND0000006
      ,VAR0000009_IND0000006
      ,VAR0000010_IND0000006
      ,VAR0000011_IND0000006
      ,VAR0000012_IND0000006
      ,VAR0000013_IND0000006
      ,VAR0000014_IND0000006
      ,VAR0000015_IND0000006
      ,VAR0000016_IND0000006
      ,VAR0000017_IND0000006
      ,VAR0000018_IND0000006
      ,VAR0000019_IND0000006
      ,VAR0000020_IND0000006
      ,
      VAR0000001_IND0000007
      ,VAR0000002_IND0000007
      ,VAR0000003_IND0000007
      ,VAR0000004_IND0000007
      ,VAR0000005_IND0000007
      ,VAR0000006_IND0000007
      ,VAR0000007_IND0000007
      ,VAR0000008_IND0000007
      ,VAR0000009_IND0000007
      ,VAR0000010_IND0000007
      ,VAR0000011_IND0000007
      ,VAR0000012_IND0000007
      ,VAR0000013_IND0000007
      ,VAR0000014_IND0000007
      ,VAR0000015_IND0000007
      ,VAR0000016_IND0000007
      ,VAR0000017_IND0000007
      ,VAR0000018_IND0000007
      ,VAR0000019_IND0000007
      ,VAR0000020_IND0000007
      ,
      VAR0000001_IND0000008
      ,VAR0000002_IND0000008
      ,VAR0000003_IND0000008
      ,VAR0000004_IND0000008
      ,VAR0000005_IND0000008
      ,VAR0000006_IND0000008
      ,VAR0000007_IND0000008
      ,VAR0000008_IND0000008
      ,VAR0000009_IND0000008
      ,VAR0000010_IND0000008
      ,VAR0000011_IND0000008
      ,VAR0000012_IND0000008
      ,VAR0000013_IND0000008
      ,VAR0000014_IND0000008
      ,VAR0000015_IND0000008
      ,VAR0000016_IND0000008
      ,VAR0000017_IND0000008
      ,VAR0000018_IND0000008
      ,VAR0000019_IND0000008
      ,VAR0000020_IND0000008
      ,
      VAR0000001_IND0000009
      ,VAR0000002_IND0000009
      ,VAR0000003_IND0000009
      ,VAR0000004_IND0000009
      ,VAR0000005_IND0000009
      ,VAR0000006_IND0000009
      ,VAR0000007_IND0000009
      ,VAR0000008_IND0000009
      ,VAR0000009_IND0000009
      ,VAR0000010_IND0000009
      ,VAR0000011_IND0000009
      ,VAR0000012_IND0000009
      ,VAR0000013_IND0000009
      ,VAR0000014_IND0000009
      ,VAR0000015_IND0000009
      ,VAR0000016_IND0000009
      ,VAR0000017_IND0000009
      ,VAR0000018_IND0000009
      ,VAR0000019_IND0000009
      ,VAR0000020_IND0000009
      ,
      VAR0000001_IND0000010
      ,VAR0000002_IND0000010
      ,VAR0000003_IND0000010
      ,VAR0000004_IND0000010
      ,VAR0000005_IND0000010
      ,VAR0000006_IND0000010
      ,VAR0000007_IND0000010
      ,VAR0000008_IND0000010
      ,VAR0000009_IND0000010
      ,VAR0000010_IND0000010
      ,VAR0000011_IND0000010
      ,VAR0000012_IND0000010
      ,VAR0000013_IND0000010
      ,VAR0000014_IND0000010
      ,VAR0000015_IND0000010
      ,VAR0000016_IND0000010
      ,VAR0000017_IND0000010
      ,VAR0000018_IND0000010
      ,VAR0000019_IND0000010
      ,VAR0000020_IND0000010
    });
  } else {









    const newRegistro = new registro({
      IND0000001,
IND0000002,
IND0000003,
IND0000004,
IND0000005,
IND0000006,
IND0000007,
IND0000008,
IND0000009,
IND0000010,
VAR0000001,
VAR0000002,
VAR0000003,
VAR0000004,
VAR0000005,
VAR0000006,
VAR0000007,
VAR0000008,
VAR0000009,
VAR0000010,
VAR0000011,
VAR0000012,
VAR0000013,
VAR0000014,
VAR0000015,
VAR0000016,
VAR0000017,
VAR0000018,
VAR0000019,
VAR0000020,

      VAR0000001_IND0000001,
      VAR0000002_IND0000001,
      VAR0000003_IND0000001,VAR0000004_IND0000001,VAR0000005_IND0000001,VAR0000006_IND0000001,
      VAR0000007_IND0000001,VAR0000008_IND0000001,VAR0000009_IND0000001,VAR0000010_IND0000001,
      VAR0000011_IND0000001,VAR0000012_IND0000001,VAR0000013_IND0000001,VAR0000014_IND0000001,
      VAR0000015_IND0000001,VAR0000016_IND0000001,VAR0000017_IND0000001,VAR0000018_IND0000001,
      VAR0000019_IND0000001,VAR0000020_IND0000001,
      VAR0000001_IND0000002,VAR0000002_IND0000002,VAR0000003_IND0000002,VAR0000004_IND0000002,
      VAR0000005_IND0000002,VAR0000006_IND0000002
      ,VAR0000007_IND0000002
      ,VAR0000008_IND0000002
      ,VAR0000009_IND0000002
      ,VAR0000010_IND0000002
      ,VAR0000011_IND0000002
      ,VAR0000012_IND0000002
      ,VAR0000013_IND0000002
      ,VAR0000014_IND0000002
      ,VAR0000015_IND0000002
      ,VAR0000016_IND0000002
      ,VAR0000017_IND0000002
      ,VAR0000018_IND0000002
      ,VAR0000019_IND0000002
      ,VAR0000020_IND0000002
      ,
      VAR0000001_IND0000003
      ,VAR0000002_IND0000003
      ,VAR0000003_IND0000003
      ,VAR0000004_IND0000003
      ,VAR0000005_IND0000003
      ,VAR0000006_IND0000003
      ,VAR0000007_IND0000003
      ,VAR0000008_IND0000003
      ,VAR0000009_IND0000003
      ,VAR0000010_IND0000003
      ,VAR0000011_IND0000003
      ,VAR0000012_IND0000003
      ,VAR0000013_IND0000003
      ,VAR0000014_IND0000003
      ,VAR0000015_IND0000003
      ,VAR0000016_IND0000003
      ,VAR0000017_IND0000003
      ,VAR0000018_IND0000003
      ,VAR0000019_IND0000003
      ,VAR0000020_IND0000003
      ,
      VAR0000001_IND0000004
      ,VAR0000002_IND0000004
      ,VAR0000003_IND0000004
      ,VAR0000004_IND0000004
      ,VAR0000005_IND0000004
      ,VAR0000006_IND0000004
      ,VAR0000007_IND0000004
      ,VAR0000008_IND0000004
      ,VAR0000009_IND0000004
      ,VAR0000010_IND0000004
      ,VAR0000011_IND0000004
      ,VAR0000012_IND0000004
      ,VAR0000013_IND0000004
      ,VAR0000014_IND0000004
      ,VAR0000015_IND0000004
      ,VAR0000016_IND0000004
      ,VAR0000017_IND0000004
      ,VAR0000018_IND0000004
      ,VAR0000019_IND0000004
      ,VAR0000020_IND0000004
      ,
      VAR0000001_IND0000005
      ,VAR0000002_IND0000005
      ,VAR0000003_IND0000005
      ,VAR0000004_IND0000005
      ,VAR0000005_IND0000005
      ,VAR0000006_IND0000005
      ,VAR0000007_IND0000005
      ,VAR0000008_IND0000005
      ,VAR0000009_IND0000005
      ,VAR0000010_IND0000005
      ,VAR0000011_IND0000005
      ,VAR0000012_IND0000005
      ,VAR0000013_IND0000005
      ,VAR0000014_IND0000005
      ,VAR0000015_IND0000005
      ,VAR0000016_IND0000005
      ,VAR0000017_IND0000005
      ,VAR0000018_IND0000005
      ,VAR0000019_IND0000005
      ,VAR0000020_IND0000005
      ,
      VAR0000001_IND0000006
      ,VAR0000002_IND0000006
      ,VAR0000003_IND0000006
      ,VAR0000004_IND0000006
      ,VAR0000005_IND0000006
      ,VAR0000006_IND0000006
      ,VAR0000007_IND0000006
      ,VAR0000008_IND0000006
      ,VAR0000009_IND0000006
      ,VAR0000010_IND0000006
      ,VAR0000011_IND0000006
      ,VAR0000012_IND0000006
      ,VAR0000013_IND0000006
      ,VAR0000014_IND0000006
      ,VAR0000015_IND0000006
      ,VAR0000016_IND0000006
      ,VAR0000017_IND0000006
      ,VAR0000018_IND0000006
      ,VAR0000019_IND0000006
      ,VAR0000020_IND0000006
      ,
      VAR0000001_IND0000007
      ,VAR0000002_IND0000007
      ,VAR0000003_IND0000007
      ,VAR0000004_IND0000007
      ,VAR0000005_IND0000007
      ,VAR0000006_IND0000007
      ,VAR0000007_IND0000007
      ,VAR0000008_IND0000007
      ,VAR0000009_IND0000007
      ,VAR0000010_IND0000007
      ,VAR0000011_IND0000007
      ,VAR0000012_IND0000007
      ,VAR0000013_IND0000007
      ,VAR0000014_IND0000007
      ,VAR0000015_IND0000007
      ,VAR0000016_IND0000007
      ,VAR0000017_IND0000007
      ,VAR0000018_IND0000007
      ,VAR0000019_IND0000007
      ,VAR0000020_IND0000007
      ,
      VAR0000001_IND0000008
      ,VAR0000002_IND0000008
      ,VAR0000003_IND0000008
      ,VAR0000004_IND0000008
      ,VAR0000005_IND0000008
      ,VAR0000006_IND0000008
      ,VAR0000007_IND0000008
      ,VAR0000008_IND0000008
      ,VAR0000009_IND0000008
      ,VAR0000010_IND0000008
      ,VAR0000011_IND0000008
      ,VAR0000012_IND0000008
      ,VAR0000013_IND0000008
      ,VAR0000014_IND0000008
      ,VAR0000015_IND0000008
      ,VAR0000016_IND0000008
      ,VAR0000017_IND0000008
      ,VAR0000018_IND0000008
      ,VAR0000019_IND0000008
      ,VAR0000020_IND0000008
      ,
      VAR0000001_IND0000009
      ,VAR0000002_IND0000009
      ,VAR0000003_IND0000009
      ,VAR0000004_IND0000009
      ,VAR0000005_IND0000009
      ,VAR0000006_IND0000009
      ,VAR0000007_IND0000009
      ,VAR0000008_IND0000009
      ,VAR0000009_IND0000009
      ,VAR0000010_IND0000009
      ,VAR0000011_IND0000009
      ,VAR0000012_IND0000009
      ,VAR0000013_IND0000009
      ,VAR0000014_IND0000009
      ,VAR0000015_IND0000009
      ,VAR0000016_IND0000009
      ,VAR0000017_IND0000009
      ,VAR0000018_IND0000009
      ,VAR0000019_IND0000009
      ,VAR0000020_IND0000009
      ,
      VAR0000001_IND0000010
      ,VAR0000002_IND0000010
      ,VAR0000003_IND0000010
      ,VAR0000004_IND0000010
      ,VAR0000005_IND0000010
      ,VAR0000006_IND0000010
      ,VAR0000007_IND0000010
      ,VAR0000008_IND0000010
      ,VAR0000009_IND0000010
      ,VAR0000010_IND0000010
      ,VAR0000011_IND0000010
      ,VAR0000012_IND0000010
      ,VAR0000013_IND0000010
      ,VAR0000014_IND0000010
      ,VAR0000015_IND0000010
      ,VAR0000016_IND0000010
      ,VAR0000017_IND0000010
      ,VAR0000018_IND0000010
      ,VAR0000019_IND0000010
      ,VAR0000020_IND0000010      
    });

    //newRegistro.user = req.user.id;
    newRegistro.user = req.user.correo;
    newRegistro.idSector = req.user.codSector;



    //console.log("registro a gabrar",newRegistro);



    //console.log("antes de grabar",req.user.id);
    //newrAsk.user = req.user.id;
    await newRegistro.save();
    req.flash("success_msg", "rAsk Added Successfully");
    res.redirect("/rIndicators");
  }

}

raskCtrl.renderrAsk = async (req, res) => {
  //res.send('Render rIndicators');
  //const preguntas = await rAsk.find({ user: req.user.id })
  const preguntas = await registro.find({ idSector: req.user.codSector, user: req.user.correo })
    .sort({ createdAt: "desc" })
    .lean();


  res.render("rIndicators/all-rask", { preguntas });
}

raskCtrl.renderEditrAskForm = async (req, res) => {
  const preguntas = await rAsk.findById(req.params.id).lean();
  if (preguntas.user != req.user.id) {
    req.flash("error_msg", "Not Authorized");
    return res.redirect("/rIndicators");
  }
  res.render("rIndicators/edit-rask", { preguntas });
}

raskCtrl.updaterAsk = (req, res) => {
  res.send('Update Edit Forms');
}

raskCtrl.DownloadFile = (req, res) => {
  console.log("archivo de descarga1:", req.body);
  console.log("archivo de descarga:", req.param.id);
  res.download('./uploads/' + req.body.filename);
}

raskCtrl.deleterAsk = async (req, res) => {
  //res.send('delete rIndicators');
  await rAsk.findByIdAndDelete(req.params.id);
  req.flash("success_msg", "rAsk Deleted Successfully");
  res.redirect("/rIndicators");


}


raskCtrl.updaterAsk = async (req, res) => {
  const { title, description } = req.body;
  await rAsk.findByIdAndUpdate(req.params.id, { title, description });
  console.log("update");
  req.flash("success_msg", "rAsk Updated Successfully");
  res.redirect("/rIndicators");
};



/*raskCtrl.create = (req, res) => {
  const saveImage = async () => {


    console.log(req.body);
    console.log(req.file);

    const imgUrl = randomNumber;
    //const images = await Image.find({ filename: imgUrl });


    if (3 > 4) {
      saveImage();
    } else {
      // Image Location
      const imageTempPath = req.file.path;
      const ext = path.extname(req.file.originalname).toLowerCase();
      const targetPath = path.resolve(`./uploads/${imgUrl}${ext}`);

      // Validate Extension
      if (
        ext === ".png" ||
        ext === ".jpg" ||
        ext === ".jpeg" ||
        ext === ".gif"
      ) {
        // you wil need the public/temp path or this will throw an error
        console.log("fs.rename");

        await fs.rename(imageTempPath, targetPath);


        var { P00000001, P00000001_T, P00000001_D,
          P00000002, P00000002_T, P00000002_D,
          P00000003, P00000003_T, P00000003_D,
          P00000004, P00000004_T, P00000004_D,
          P00000005, P00000005_T, P00000005_D,
          P00000006, P00000006_T, P00000006_D,
          P00000007, P00000007_T, P00000007_D,
          P00000008, P00000008_T, P00000008_D,
          P00000009, P00000009_T, P00000009_D,
          P00000010, P00000010_T, P00000010_D,
          P00000011, P00000011_T, P00000011_D,
          P00000012, P00000012_T, P00000012_D,
          P00000013, P00000013_T, P00000013_D,
          P00000014, P00000014_T, P00000014_D,
          P00000015, P00000015_T, P00000015_D,
          P00000016, P00000016_T, P00000016_D,
          P00000017, P00000017_T, P00000017_D,
          P00000018, P00000018_T, P00000018_D,
          P00000019, P00000019_T, P00000019_D,
          P00000020, P00000020_T, P00000020_D,
          P00000021, P00000021_T, P00000021_D,
          P00000017, P00000017_T, P00000017_D,
          P00000022, P00000022_T, P00000022_D,
          P00000023, P00000023_T, P00000023_D,
          P00000024, P00000024_T, P00000024_D,
          P00000025, P00000025_T, P00000025_D,
          P00000026, P00000026_T, P00000026_D,
          opcion, CodSector } = req.body;

        const errors = [];

        if (errors.length > 0) {
          res.render("rIndicators/new-rask", {
            errors,
            P00000001, P00000001_T, P00000001_D,
            P00000002, P00000002_T, P00000002_D,
            P00000003, P00000003_T, P00000003_D,
            P00000004, P00000004_T, P00000004_D,
            P00000005, P00000005_T, P00000005_D,
            P00000006, P00000006_T, P00000006_D,
            P00000007, P00000007_T, P00000007_D,
            P00000008, P00000008_T, P00000008_D,
            P00000009, P00000009_T, P00000009_D,
            P00000010, P00000010_T, P00000010_D,
            P00000011, P00000011_T, P00000011_D,
            P00000012, P00000012_T, P00000012_D,
            P00000013, P00000013_T, P00000013_D,
            P00000014, P00000014_T, P00000014_D,
            P00000015, P00000015_T, P00000015_D,
            P00000016, P00000016_T, P00000016_D,
            P00000017, P00000017_T, P00000017_D,
            P00000018, P00000018_T, P00000018_D,
            P00000019, P00000019_T, P00000019_D,
            P00000020, P00000020_T, P00000020_D,
            P00000021, P00000021_T, P00000021_D,
            P00000017, P00000017_T, P00000017_D,
            P00000022, P00000022_T, P00000022_D,
            P00000023, P00000023_T, P00000023_D,
            P00000024, P00000024_T, P00000024_D,
            P00000025, P00000025_T, P00000025_D,
            P00000026, P00000026_T, P00000026_D,
            opcion, CodSector
          });
        } else {

          // you wil need the public/temp path or this will throw an error
          //await fs.rename(imageTempPath, targetPath);
          const newRegistro = new registro({
            P00000001, P00000001_T, P00000001_D,
            P00000002, P00000002_T, P00000002_D,
            P00000003, P00000003_T, P00000003_D: imgUrl + ext,
            P00000004, P00000004_T, P00000004_D,
            P00000005, P00000005_T, P00000005_D,
            P00000006, P00000006_T, P00000006_D,
            P00000007, P00000007_T, P00000007_D,
            P00000008, P00000008_T, P00000008_D,
            P00000009, P00000009_T, P00000009_D,
            P00000010, P00000010_T, P00000010_D,
            P00000011, P00000011_T, P00000011_D,
            P00000012, P00000012_T, P00000012_D,
            P00000013, P00000013_T, P00000013_D,
            P00000014, P00000014_T, P00000014_D,
            P00000015, P00000015_T, P00000015_D,
            P00000016, P00000016_T, P00000016_D,
            P00000017, P00000017_T, P00000017_D,
            P00000018, P00000018_T, P00000018_D,
            P00000019, P00000019_T, P00000019_D,
            P00000020, P00000020_T, P00000020_D,
            P00000021, P00000021_T, P00000021_D,
            P00000017, P00000017_T, P00000017_D,
            P00000022, P00000022_T, P00000022_D,
            P00000023, P00000023_T, P00000023_D,
            P00000024, P00000024_T, P00000024_D,
            P00000025, P00000025_T, P00000025_D,
            P00000026, P00000026_T, P00000026_D,
            opcion, CodSector
          });

          newRegistro.user = req.user.id;
          newRegistro.CodSector = req.user.codSector;

          console.log("registro a gabrar", newRegistro);



          //console.log("antes de grabar",req.user.id);
          //newrAsk.user = req.user.id;
          await newRegistro.save();
          req.flash("success_msg", "rAsk Added Successfully");
          res.redirect("/rIndicators");


        }




      } else {
        await fs.unlink(imageTempPath);
        res.status(500).json({ error: "Only Images are allowed" });
      }
    }
  };

  saveImage();
};
*/

module.exports = raskCtrl;
